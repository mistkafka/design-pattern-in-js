<!DOCTYPE html>
<html lang="zh_CN">
    <head>
        <meta charset="utf-8" />
        <title>命令模式</title>
    </head>
    <body>
      <section>
        <h1>感受</h1>
        <p>命令模式是让我很困惑的一个设计模式，这可能是因为命令模式容易让人觉得它没什么用。看了几次之后，我算是能比较好的理解它了。命令模式有两个作用：1. 封装可传递的命令，使命令的“发送者”、“执行者”、“执行方式”三者之间解耦。2. 给“命令模式”一个规范，这里的规范指的是：execute跟undo。</p>
        <p>对于作用1，其实JavaScript不是很需要，因为函数作为一等公民，本身就可以充电“命令”，命令即函数。而对于作用2，反而貌似有了一点作用。我总觉得作用2不是命令模式的“根本”。但，不管怎么样，给出一个“规范”也是不错的。</p>
        <p>另外，命令模式总给我一种“消息（信号）”的感觉，发送一个命令就是发送一个“消息”。</p>
      </section>
      
      <section>
        <h1>反例</h1>
        <p>如果不用命令模式会怎样？想象这样一个需求：点击一个button，就会移动一下皮球。我们完全可以这样实现：直接在button的onclick回调里，直接操作皮球的移动。就像这样：</p>
        <pre>
          button.onclick(() => {
              ball.move();
          });
        </pre>
        <p>这个场景下，什么是易变的？button跟球的关系易变。这个button很可能变成给皮球染色，而不是移动；也可能希望是移动别的物体，而不是皮球。采用命令模式重构后，命令模式在其中冲到的，就是调和者的作用，使button（请求的发送者）跟球（请求的执行者）之间解耦。</p>
      </section>

      <section>
        <h1>实践：皮球</h1>
        <p>我觉得书上的移动方块的例子不错。就按这个例子来实践吧！</p>
        <a href="./example.ts" target="_blank">源码</a>
        <div>
          <iframe src="./example.html">
          </iframe>
        </div>
      </section>
    </body>
</html>
